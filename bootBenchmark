#!/bin/bash

# boot ok timestamp
echo "Boot Benchmark" > /dev/kmsg

# create the data file
cat /proc/version > /home/$(uname -r).log

# get cpu usage since boot
echo "----------------------------------------------------------------------------------------" >> /home/$(uname -r).log
echo "ðŸ”¥ CPU USAGE" >> /home/$(uname -r).log
awk '/cpu /{print 100*($2+$4)/($2+$4+$5)}' /proc/stat >> /home/$(uname -r).log

# get memory usage
echo "----------------------------------------------------------------------------------------" >> /home/$(uname -r).log
echo "ðŸ’½ MEMORY USAGE" >> /home/$(uname -r).log
free >> /home/$(uname -r).log
free -h >> /home/$(uname -r).log

# get the timestamp
echo "----------------------------------------------------------------------------------------" >> /home/$(uname -r).log
echo "ðŸ‘¢ BOOT TIME" >> /home/$(uname -r).log
dmesg | grep 'Boot Benchmark' >> /home/$(uname -r).log

# get system info
echo "----------------------------------------------------------------------------------------" >> /home/$(uname -r).log
/usr/bin/wslfetch >> /home/$(uname -r).log
echo "----------------------------------------------------------------------------------------" >> /home/$(uname -r).log
